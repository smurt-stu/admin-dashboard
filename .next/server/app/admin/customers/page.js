(()=>{var e={};e.id=16,e.ids=[16],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},65422:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var r=t(70260),a=t(28203),l=t(25155),i=t.n(l),n=t(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["admin",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79406)),"/home/mohjas/CascadeProjects/admin/app/admin/customers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,54899)),"/home/mohjas/CascadeProjects/admin/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"/home/mohjas/CascadeProjects/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,61129)),"/home/mohjas/CascadeProjects/admin/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],o=["/home/mohjas/CascadeProjects/admin/app/admin/customers/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/customers/page",pathname:"/admin/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35669:(e,s,t)=>{Promise.resolve().then(t.bind(t,79406))},77525:(e,s,t)=>{Promise.resolve().then(t.bind(t,82603))},82603:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(45512),a=t(58009),l=t(79334),i=t(28531),n=t.n(i),c=t(57105);function d({isOpen:e,onClose:s,onSubmit:t}){let[l,i]=(0,a.useState)({full_name:"",email:"",username:"",password:"",university:"",college:"",major_name:"",is_active:!0,user_role:"user"}),[n,c]=(0,a.useState)(!1),[d,o]=(0,a.useState)(""),x=e=>{let{name:s,value:t,type:r}=e.target;i(a=>({...a,[s]:"checkbox"===r?e.target.checked:t}))},m=async e=>{if(e.preventDefault(),c(!0),o(""),!l.full_name.trim()){o("الاسم الكامل مطلوب"),c(!1);return}if(!l.email.trim()){o("البريد الإلكتروني مطلوب"),c(!1);return}if(!l.username.trim()){o("اسم المستخدم مطلوب"),c(!1);return}if(!l.password.trim()||l.password.length<6){o("كلمة المرور يجب أن تكون 6 أحرف على الأقل"),c(!1);return}try{await t(l),i({full_name:"",email:"",username:"",password:"",university:"",college:"",major_name:"",is_active:!0,user_role:"user"}),s()}catch(e){o(e instanceof Error?e.message:"فشل في إنشاء المستخدم")}finally{c(!1)}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"إضافة مستخدم جديد"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("i",{className:"ri-close-line text-xl"})})]})}),d&&(0,r.jsxs)("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)("i",{className:"ri-error-warning-fill text-red-500"}),(0,r.jsx)("span",{className:"text-red-700",children:d})]}),(0,r.jsxs)("form",{onSubmit:m,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل *"}),(0,r.jsx)("input",{type:"text",id:"full_name",name:"full_name",value:l.full_name,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل الاسم الكامل"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني *"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:l.email,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل البريد الإلكتروني"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المستخدم *"}),(0,r.jsx)("input",{type:"text",id:"username",name:"username",value:l.username,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم المستخدم"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور *"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",value:l.password,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل كلمة المرور"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"university",className:"block text-sm font-medium text-gray-700 mb-2",children:"الجامعة"}),(0,r.jsx)("input",{type:"text",id:"university",name:"university",value:l.university,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم الجامعة"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"college",className:"block text-sm font-medium text-gray-700 mb-2",children:"الكلية"}),(0,r.jsx)("input",{type:"text",id:"college",name:"college",value:l.college,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم الكلية"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"major_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"التخصص"}),(0,r.jsx)("input",{type:"text",id:"major_name",name:"major_name",value:l.major_name,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل التخصص"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"user_role",className:"block text-sm font-medium text-gray-700 mb-2",children:"الدور"}),(0,r.jsxs)("select",{id:"user_role",name:"user_role",value:l.user_role,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"user",children:"مستخدم"}),(0,r.jsx)("option",{value:"staff",children:"موظف"}),(0,r.jsx)("option",{value:"admin",children:"مدير"}),(0,r.jsx)("option",{value:"moderator",children:"مشرف"}),(0,r.jsx)("option",{value:"editor",children:"محرر"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"الصلاحيات"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:l.is_active,onChange:x,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"حساب نشط"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 rtl:space-x-reverse pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"إلغاء"}),(0,r.jsxs)("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 rtl:space-x-reverse",children:[n&&(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:n?"جاري الإنشاء...":"إنشاء المستخدم"})]})]})]})]})}):null}function o(){(0,l.useRouter)();let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[o,x]=(0,a.useState)({page:1,search:""}),[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),N=async()=>{try{i(!0);let e=await c.D.getUsers(o.page,o.search);s(e.results||e)}catch(e){j(e instanceof Error?e.message:"فشل في تحميل قائمة المستخدمين")}finally{i(!1)}},w=async e=>{if(0===m.length){j("يرجى اختيار مستخدمين واحد على الأقل");return}try{await c.D.bulkAction({user_ids:m,action:e}),y(`تم ${"activate"===e?"تفعيل":"deactivate"===e?"إلغاء تفعيل":"حذف"} المستخدمين المحددين بنجاح`),u([]),b(!1),N()}catch(e){j(e instanceof Error?e.message:"فشل في تنفيذ الإجراء المجمع")}},_=async e=>{try{await c.D.createUser(e),y("تم إنشاء المستخدم بنجاح"),N()}catch(e){throw e}},k=async e=>{if(confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{await c.D.deleteUser(e),y("تم حذف المستخدم بنجاح"),N()}catch(e){j(e instanceof Error?e.message:"فشل في حذف المستخدم")}},C=async e=>{if(confirm("هل أنت متأكد من إعادة تعيين كلمة مرور هذا المستخدم؟"))try{await c.D.resetPassword(e),y("تم إعادة تعيين كلمة المرور بنجاح")}catch(e){j(e instanceof Error?e.message:"فشل في إعادة تعيين كلمة المرور")}},P=e=>{u(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"إدارة العملاء"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2 text-responsive",children:"إدارة حسابات المستخدمين والصلاحيات"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[(0,r.jsxs)("button",{onClick:()=>b(!g),className:`btn-responsive border ${g?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[(0,r.jsx)("i",{className:"ri-settings-3-line ml-2"}),"إجراءات مجمعة"]}),(0,r.jsxs)("button",{onClick:()=>p(!0),className:"btn-responsive bg-blue-600 text-white hover:bg-blue-700 flex items-center justify-center",children:[(0,r.jsx)("i",{className:"ri-add-line ml-2"}),"إضافة مستخدم جديد"]})]})]}),v&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)("i",{className:"ri-check-line text-green-500"}),(0,r.jsx)("span",{className:"text-green-700 text-responsive",children:v})]}),(0,r.jsx)("button",{onClick:()=>y(""),className:"text-green-500 hover:text-green-700",children:(0,r.jsx)("i",{className:"ri-close-line"})})]}),f&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)("i",{className:"ri-error-warning-line text-red-500"}),(0,r.jsx)("span",{className:"text-red-700 text-responsive",children:f})]}),(0,r.jsx)("button",{onClick:()=>j(""),className:"text-red-500 hover:text-red-700",children:(0,r.jsx)("i",{className:"ri-close-line"})})]}),g&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-800 text-responsive",children:"الإجراءات المجمعة"}),(0,r.jsxs)("span",{className:"text-sm text-blue-600",children:[m.length," مستخدم محدد"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,r.jsx)("button",{onClick:()=>w("activate"),className:"btn-responsive bg-green-600 text-white hover:bg-green-700",children:"تفعيل"}),(0,r.jsx)("button",{onClick:()=>w("deactivate"),className:"btn-responsive bg-yellow-600 text-white hover:bg-yellow-700",children:"إلغاء التفعيل"}),(0,r.jsx)("button",{onClick:()=>w("delete"),className:"btn-responsive bg-red-600 text-white hover:bg-red-700",children:"حذف"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"card-responsive",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 text-responsive",children:"إجمالي المستخدمين"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:e.length})]}),(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-line text-blue-600 text-lg sm:text-xl"})})]})}),(0,r.jsx)("div",{className:"card-responsive",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 text-responsive",children:"المستخدمين النشطين"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:e.filter(e=>e.is_active).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-star-line text-green-600 text-lg sm:text-xl"})})]})}),(0,r.jsx)("div",{className:"card-responsive",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 text-responsive",children:"الموظفين"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:e.filter(e=>e.is_staff).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-shield-user-line text-purple-600 text-lg sm:text-xl"})})]})}),(0,r.jsx)("div",{className:"card-responsive",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 text-responsive",children:"المديرين العامين"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:e.filter(e=>e.is_superuser).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-shield-star-line text-red-600 text-lg sm:text-xl"})})]})})]}),(0,r.jsx)("div",{className:"card-responsive",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(e=>({...e,page:1}))},className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"البحث في المستخدمين...",value:o.search,onChange:e=>x(s=>({...s,search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive"})}),(0,r.jsxs)("button",{type:"submit",className:"btn-responsive bg-blue-600 text-white hover:bg-blue-700 flex items-center justify-center",children:[(0,r.jsx)("i",{className:"ri-search-line ml-2"}),"بحث"]})]})}),(0,r.jsx)("div",{className:"card-responsive overflow-hidden",children:t?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 text-responsive",children:"جاري تحميل البيانات..."})]})}):0===e.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("i",{className:"ri-user-line text-gray-300 text-4xl sm:text-6xl mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg text-responsive",children:"لا توجد مستخدمين"}),(0,r.jsx)("button",{onClick:()=>p(!0),className:"mt-4 btn-responsive bg-blue-600 text-white hover:bg-blue-700",children:"إضافة أول مستخدم"})]})}):(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 sm:px-4 py-3 text-right",children:(0,r.jsx)("input",{type:"checkbox",checked:m.length===e.length&&e.length>0,onChange:()=>{m.length===e.length?u([]):u(e.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,r.jsx)("th",{className:"px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"المستخدم"}),(0,r.jsx)("th",{className:"hidden sm:table-cell px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"البريد الإلكتروني"}),(0,r.jsx)("th",{className:"hidden lg:table-cell px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"رقم الهاتف"}),(0,r.jsx)("th",{className:"px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"الحالة"}),(0,r.jsx)("th",{className:"hidden md:table-cell px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"الصلاحيات"}),(0,r.jsx)("th",{className:"hidden lg:table-cell px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"تاريخ الانضمام"}),(0,r.jsx)("th",{className:"px-2 sm:px-4 py-3 text-right text-sm font-medium text-gray-700 text-responsive",children:"الإجراءات"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,r.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>P(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,r.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,r.jsx)("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center ${e.is_superuser?"bg-red-100":e.is_staff?"bg-purple-100":"bg-blue-100"}`,children:(0,r.jsx)("i",{className:`${e.is_superuser?"ri-shield-star-fill text-red-600":e.is_staff?"ri-shield-user-fill text-purple-600":"ri-user-fill text-blue-600"} text-sm sm:text-base`})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 text-responsive truncate",children:e.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["@",e.username]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate sm:hidden",children:e.email})]})]})}),(0,r.jsx)("td",{className:"hidden sm:table-cell px-2 sm:px-4 py-3 text-sm text-gray-900 text-responsive",children:e.email}),(0,r.jsx)("td",{className:"hidden lg:table-cell px-2 sm:px-4 py-3 text-sm text-gray-900 text-responsive",children:e.phone_number||"-"}),(0,r.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,r.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"نشط":"غير نشط"})}),(0,r.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-4 py-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[e.is_superuser&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"مدير عام"}),e.is_staff&&!e.is_superuser&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"موظف"}),!e.is_staff&&!e.is_superuser&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"مستخدم"})]})}),(0,r.jsx)("td",{className:"hidden lg:table-cell px-2 sm:px-4 py-3 text-sm text-gray-500 text-responsive",children:new Date(e.created_at).toLocaleDateString("ar-SA")}),(0,r.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)(n(),{href:`/admin/customers/${e.id}`,className:"text-blue-600 hover:text-blue-700 p-1",title:"عرض التفاصيل",children:(0,r.jsx)("i",{className:"ri-eye-line text-sm sm:text-base"})}),(0,r.jsx)(n(),{href:`/admin/customers/${e.id}/edit`,className:"text-green-600 hover:text-green-700 p-1",title:"تعديل",children:(0,r.jsx)("i",{className:"ri-edit-line text-sm sm:text-base"})}),(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-yellow-600 hover:text-yellow-700 p-1",title:"إعادة تعيين كلمة المرور",children:(0,r.jsx)("i",{className:"ri-lock-password-line text-sm sm:text-base"})}),(0,r.jsx)("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-700 p-1",title:"حذف",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-sm sm:text-base"})})]})})]},e.id))})]})})}),e.length>0&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg gap-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700 text-responsive",children:["عرض ",e.length," من النتائج"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)("button",{onClick:()=>x(e=>({...e,page:Math.max(1,e.page-1)})),disabled:1===o.page,className:"btn-responsive border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),(0,r.jsx)("span",{className:"px-3 py-2 text-sm bg-blue-600 text-white rounded",children:o.page}),(0,r.jsx)("button",{onClick:()=>x(e=>({...e,page:e.page+1})),disabled:e.length<10,className:"btn-responsive border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]})]}),(0,r.jsx)(d,{isOpen:h,onClose:()=>p(!1),onSubmit:_})]})}},57105:(e,s,t)=>{"use strict";t.d(s,{D:()=>l});var r=t(58957);let a="https://smart-ai-api.onrender.com/api/v1";class l{static async getUsers(e=1,s){let t=new URLSearchParams({page:e.toString(),...s&&{search:s}}),l=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/?${t}`);if(!l.ok)throw Error("فشل في تحميل قائمة المستخدمين");return l.json()}static async getUserById(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`);if(!s.ok)throw Error("فشل في تحميل بيانات المستخدم");return(await s.json()).user}static async createUser(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في إنشاء المستخدم");return s.json()}static async updateUser(e,s){let t=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"PATCH",body:JSON.stringify(s)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"فشل في تحديث المستخدم");return t.json()}static async deleteUser(e){if(!(await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"DELETE"})).ok)throw Error("فشل في حذف المستخدم")}static async bulkAction(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/bulk-actions/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في تنفيذ العملية")}static async resetPassword(e){if(!(await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/reset-password/`,{method:"POST"})).ok)throw Error("فشل في إعادة تعيين كلمة المرور")}static getRoleDisplayName(e){return({superuser:"مدير عام",admin:"مدير",staff:"موظف",user:"مستخدم",moderator:"مشرف",editor:"محرر"})[e]||e}static getStatusColor(e){return e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}static getStatusText(e){return e?"نشط":"غير نشط"}}},79406:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohjas/CascadeProjects/admin/app/admin/customers/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohjas/CascadeProjects/admin/app/admin/customers/page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[135,889,817],()=>t(65422));module.exports=r})();