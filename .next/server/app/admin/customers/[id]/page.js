(()=>{var e={};e.id=770,e.ids=[770],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},27732:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>m,routeModule:()=>o,tree:()=>c});var r=t(70260),a=t(28203),i=t(25155),n=t.n(i),l=t(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c=["",{children:["admin",{children:["customers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,72650)),"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,54899)),"/home/mohjas/CascadeProjects/admin/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"/home/mohjas/CascadeProjects/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,61129)),"/home/mohjas/CascadeProjects/admin/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],m=["/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},o=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/customers/[id]/page",pathname:"/admin/customers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43421:(e,s,t)=>{Promise.resolve().then(t.bind(t,72650))},38685:(e,s,t)=>{Promise.resolve().then(t.bind(t,99062))},99062:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(45512),a=t(58009),i=t(79334),n=t(28531),l=t.n(n),d=t(57105);function c({params:e}){let s=(0,i.useRouter)(),t=(0,a.use)(e),[n,c]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[o,u]=(0,a.useState)(""),h=async()=>{if(confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{await d.D.deleteUser(t.id),s.push("/admin/customers")}catch(e){u(e instanceof Error?e.message:"فشل في حذف المستخدم")}},p=async()=>{if(confirm("هل أنت متأكد من إعادة تعيين كلمة مرور هذا المستخدم؟"))try{await d.D.resetPassword(t.id),alert("تم إعادة تعيين كلمة المرور بنجاح")}catch(e){u(e instanceof Error?e.message:"فشل في إعادة تعيين كلمة المرور")}};return m?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"جاري تحميل البيانات..."})]})}):n?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"تفاصيل المستخدم"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"عرض معلومات المستخدم والصلاحيات"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,r.jsxs)(l(),{href:`/admin/customers/${t.id}/edit`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:[(0,r.jsx)("i",{className:"ri-edit-line ml-2"}),"تعديل"]}),(0,r.jsxs)("button",{onClick:p,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 flex items-center",children:[(0,r.jsx)("i",{className:"ri-lock-password-line ml-2"}),"إعادة تعيين كلمة المرور"]}),(0,r.jsxs)("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",children:[(0,r.jsx)("i",{className:"ri-delete-bin-line ml-2"}),"حذف"]}),(0,r.jsx)(l(),{href:"/admin/customers",className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"العودة للقائمة"})]})]}),o&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-2 rtl:space-x-reverse",children:[(0,r.jsx)("i",{className:"ri-error-warning-fill text-red-500"}),(0,r.jsx)("span",{className:"text-red-700",children:o})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6 rtl:space-x-reverse",children:[(0,r.jsx)("div",{className:`w-24 h-24 rounded-full flex items-center justify-center text-3xl ${"superuser"===n.user_role?"bg-red-100 text-red-600":"staff"===n.user_role?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:(0,r.jsx)("i",{className:`${"superuser"===n.user_role?"ri-shield-star-fill":"staff"===n.user_role?"ri-shield-user-fill":"ri-user-fill"}`})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 rtl:space-x-reverse mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:n.full_name}),(0,r.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.is_active?"نشط":"غير نشط"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"البريد الإلكتروني"}),(0,r.jsx)("p",{className:"font-medium",children:n.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"اسم المستخدم"}),(0,r.jsxs)("p",{className:"font-medium",children:["@",n.username]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"رقم الهاتف"}),(0,r.jsx)("p",{className:"font-medium",children:n.phone_number||"غير محدد"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"الجامعة"}),(0,r.jsx)("p",{className:"font-medium",children:n.university||"غير محدد"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"الكلية"}),(0,r.jsx)("p",{className:"font-medium",children:n.college||"غير محدد"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"التخصص"}),(0,r.jsx)("p",{className:"font-medium",children:n.major||"غير محدد"})]})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"الصلاحيات"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"الدور"}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:d.D.getRoleDisplayName(n.user_role)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"مدير عام"}),(0,r.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.is_superuser?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n.is_superuser?"نعم":"لا"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"موظف"}),(0,r.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.is_staff?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:n.is_staff?"نعم":"لا"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"حالة الحساب"}),(0,r.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.is_active?"نشط":"غير نشط"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"حالة التحقق"}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:n.email_verified?"محقق":"غير محقق"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"معلومات الحساب"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"تاريخ الانضمام"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:new Date(n.created_at).toLocaleDateString("ar-SA")})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"آخر تسجيل دخول"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:n.last_login?new Date(n.last_login).toLocaleDateString("ar-SA"):"لم يسجل دخول بعد"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"معرف المستخدم"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",n.id]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"إحصائيات النشاط"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"الطلبات"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"المنتجات المشتراة"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"التقييمات"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"معلومات إضافية"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"معرف المستخدم"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",n.id]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"نوع الحساب"}),(0,r.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.is_superuser?"bg-red-100 text-red-800":n.is_staff?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:n.is_superuser?"مدير عام":n.is_staff?"موظف":"مستخدم عادي"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"حالة التحقق"}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"محقق"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"سجل النشاط"}),(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("i",{className:"ri-time-line text-4xl mb-2"}),(0,r.jsx)("p",{children:"لا توجد أنشطة مسجلة بعد"})]})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("i",{className:"ri-user-line text-gray-300 text-6xl mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"المستخدم غير موجود"}),(0,r.jsx)(l(),{href:"/admin/customers",className:"text-blue-600 hover:text-blue-700 mt-4 inline-block",children:"العودة للقائمة"})]})}},57105:(e,s,t)=>{"use strict";t.d(s,{D:()=>i});var r=t(58957);let a="https://smart-ai-api.onrender.com/api/v1";class i{static async getUsers(e=1,s){let t=new URLSearchParams({page:e.toString(),...s&&{search:s}}),i=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/?${t}`);if(!i.ok)throw Error("فشل في تحميل قائمة المستخدمين");return i.json()}static async getUserById(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`);if(!s.ok)throw Error("فشل في تحميل بيانات المستخدم");return(await s.json()).user}static async createUser(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في إنشاء المستخدم");return s.json()}static async updateUser(e,s){let t=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"PATCH",body:JSON.stringify(s)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"فشل في تحديث المستخدم");return t.json()}static async deleteUser(e){if(!(await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"DELETE"})).ok)throw Error("فشل في حذف المستخدم")}static async bulkAction(e){let s=await r.u.makeAuthenticatedRequest(`${a}/auth/admin/bulk-actions/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في تنفيذ العملية")}static async resetPassword(e){if(!(await r.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/reset-password/`,{method:"POST"})).ok)throw Error("فشل في إعادة تعيين كلمة المرور")}static getRoleDisplayName(e){return({superuser:"مدير عام",admin:"مدير",staff:"موظف",user:"مستخدم",moderator:"مشرف",editor:"محرر"})[e]||e}static getStatusColor(e){return e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}static getStatusText(e){return e?"نشط":"غير نشط"}}},72650:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/page.tsx","default")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[135,889,817],()=>t(27732));module.exports=r})();