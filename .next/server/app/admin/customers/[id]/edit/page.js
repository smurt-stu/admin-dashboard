(()=>{var e={};e.id=227,e.ids=[227],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},81832:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var t=r(70260),a=r(28203),i=r(25155),n=r.n(i),l=r(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let d=["",{children:["admin",{children:["customers",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,48209)),"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,54899)),"/home/mohjas/CascadeProjects/admin/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/home/mohjas/CascadeProjects/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,61129)),"/home/mohjas/CascadeProjects/admin/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/edit/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/customers/[id]/edit/page",pathname:"/admin/customers/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37820:(e,s,r)=>{Promise.resolve().then(r.bind(r,48209))},47548:(e,s,r)=>{Promise.resolve().then(r.bind(r,14893))},14893:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(45512),a=r(58009),i=r(79334),n=r(28531),l=r.n(n),o=r(57105);function d({params:e}){let s=(0,i.useRouter)(),[r,n]=(0,a.useState)(null),[d,c]=(0,a.useState)({}),[u,m]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),v=e=>{let{name:s,value:r,type:t}=e.target;c(a=>({...a,[s]:"checkbox"===t?e.target.checked:r}))},j=async e=>{if(e.preventDefault(),p(!0),g(""),!d.full_name?.trim()){g("الاسم الكامل مطلوب"),p(!1);return}if(!d.email?.trim()){g("البريد الإلكتروني مطلوب"),p(!1);return}if(!d.username?.trim()){g("اسم المستخدم مطلوب"),p(!1);return}try{await o.D.updateUser(b,d),s.push("/admin/customers")}catch(e){g(e instanceof Error?e.message:"حدث خطأ أثناء تحديث المستخدم")}finally{p(!1)}};return u?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 text-responsive",children:"جاري تحميل البيانات..."})]})}):r?(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"تعديل بيانات المستخدم"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4",children:[(0,t.jsxs)(l(),{href:`/admin/customers/${b}`,className:"text-gray-600 hover:text-gray-800 flex items-center justify-center space-x-2 rtl:space-x-reverse text-responsive",children:[(0,t.jsx)("i",{className:"ri-eye-line"}),(0,t.jsx)("span",{children:"عرض التفاصيل"})]}),(0,t.jsxs)(l(),{href:"/admin/customers",className:"text-gray-600 hover:text-gray-800 flex items-center justify-center space-x-2 rtl:space-x-reverse text-responsive",children:[(0,t.jsx)("i",{className:"ri-arrow-right-line"}),(0,t.jsx)("span",{children:"العودة للقائمة"})]})]})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,t.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center ${"superuser"===r.user_role?"bg-red-100":"admin"===r.user_role?"bg-purple-100":"bg-blue-100"}`,children:(0,t.jsx)("i",{className:`${"superuser"===r.user_role?"ri-shield-star-fill text-red-600":"admin"===r.user_role?"ri-shield-user-fill text-purple-600":"ri-user-fill text-blue-600"} text-lg sm:text-xl`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-800 text-responsive",children:r.full_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 text-responsive",children:r.email}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 text-responsive",children:["انضم في: ",new Date(r.created_at).toLocaleDateString("ar-SA")]})]})]})}),h&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-2 rtl:space-x-reverse",children:[(0,t.jsx)("i",{className:"ri-error-warning-fill text-red-500"}),(0,t.jsx)("span",{className:"text-red-700 text-responsive",children:h})]}),(0,t.jsx)("div",{className:"card-responsive",children:(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"الاسم الكامل"}),(0,t.jsx)("input",{type:"text",id:"full_name",name:"full_name",value:d.full_name||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل الاسم الكامل"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"البريد الإلكتروني"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:d.email||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل البريد الإلكتروني"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"اسم المستخدم"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:d.username||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل اسم المستخدم"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"university",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"الجامعة"}),(0,t.jsx)("input",{type:"text",id:"university",name:"university",value:d.university||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل اسم الجامعة"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"college",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"الكلية"}),(0,t.jsx)("input",{type:"text",id:"college",name:"college",value:d.college||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل اسم الكلية"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"major_name",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"التخصص"}),(0,t.jsx)("input",{type:"text",id:"major_name",name:"major_name",value:d.major_name||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",placeholder:"أدخل التخصص"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"user_role",className:"block text-sm font-medium text-gray-700 mb-2 text-responsive",children:"الدور"}),(0,t.jsxs)("select",{id:"user_role",name:"user_role",value:d.user_role||"",onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-responsive",children:[(0,t.jsx)("option",{value:"user",children:"مستخدم"}),(0,t.jsx)("option",{value:"staff",children:"موظف"}),(0,t.jsx)("option",{value:"admin",children:"مدير"}),(0,t.jsx)("option",{value:"superuser",children:"مدير عام"}),(0,t.jsx)("option",{value:"moderator",children:"مشرف"}),(0,t.jsx)("option",{value:"editor",children:"محرر"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-800 text-responsive",children:"الصلاحيات"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:d.is_active||!1,onChange:v,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"is_active",className:"text-sm text-gray-700 text-responsive",children:"حساب نشط"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)(l(),{href:"/admin/customers",className:"btn-responsive text-gray-600 border border-gray-300 hover:bg-gray-50 text-center",children:"إلغاء"}),(0,t.jsxs)("button",{type:"submit",disabled:x,className:"btn-responsive bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 rtl:space-x-reverse",children:[x&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,t.jsx)("span",{children:x?"جاري الحفظ...":"حفظ التغييرات"})]})]})]})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("i",{className:"ri-user-line text-gray-300 text-4xl sm:text-6xl mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 text-lg text-responsive",children:"المستخدم غير موجود"}),(0,t.jsx)(l(),{href:"/admin/customers",className:"text-blue-600 hover:text-blue-700 mt-4 inline-block text-responsive",children:"العودة للقائمة"})]})}},57105:(e,s,r)=>{"use strict";r.d(s,{D:()=>i});var t=r(58957);let a="https://smart-ai-api.onrender.com/api/v1";class i{static async getUsers(e=1,s){let r=new URLSearchParams({page:e.toString(),...s&&{search:s}}),i=await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/?${r}`);if(!i.ok)throw Error("فشل في تحميل قائمة المستخدمين");return i.json()}static async getUserById(e){let s=await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`);if(!s.ok)throw Error("فشل في تحميل بيانات المستخدم");return(await s.json()).user}static async createUser(e){let s=await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في إنشاء المستخدم");return s.json()}static async updateUser(e,s){let r=await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"PATCH",body:JSON.stringify(s)});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"فشل في تحديث المستخدم");return r.json()}static async deleteUser(e){if(!(await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/`,{method:"DELETE"})).ok)throw Error("فشل في حذف المستخدم")}static async bulkAction(e){let s=await t.u.makeAuthenticatedRequest(`${a}/auth/admin/bulk-actions/`,{method:"POST",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"فشل في تنفيذ العملية")}static async resetPassword(e){if(!(await t.u.makeAuthenticatedRequest(`${a}/auth/admin/users/${e}/reset-password/`,{method:"POST"})).ok)throw Error("فشل في إعادة تعيين كلمة المرور")}static getRoleDisplayName(e){return({superuser:"مدير عام",admin:"مدير",staff:"موظف",user:"مستخدم",moderator:"مشرف",editor:"محرر"})[e]||e}static getStatusColor(e){return e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}static getStatusText(e){return e?"نشط":"غير نشط"}}},48209:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohjas/CascadeProjects/admin/app/admin/customers/[id]/edit/page.tsx","default")}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[135,889,817],()=>r(81832));module.exports=t})();