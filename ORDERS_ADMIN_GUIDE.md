# دليل إدارة الطلبات - لوحة التحكم

## نظرة عامة

تم تطوير نظام إدارة الطلبات في لوحة التحكم بناءً على تقرير API المرفق، ويوفر واجهات عملية ومتقدمة لإدارة الطلبات بكفاءة عالية. النظام مصمم لزيادة الإنتاجية وتسهيل عملية إدارة الطلبات للمستخدمين الإداريين.

## الميزات الرئيسية

### 1. قائمة الطلبات الرئيسية (`/admin/orders`)
- **عرض شامل**: قائمة جميع الطلبات مع معلومات أساسية
- **تصفية متقدمة**: حسب الحالة، الدفع، التاريخ، المبلغ
- **بحث ذكي**: في أرقام الطلبات، أسماء العملاء، البريد الإلكتروني
- **إجراءات سريعة**: تأكيد، شحن، تسليم، إلغاء الطلبات
- **تحديد متعدد**: إمكانية تحديد عدة طلبات للعمليات المجمعة
- **إحصائيات مباشرة**: عرض الإحصائيات في أعلى الصفحة

### 2. تفاصيل الطلب (`/admin/orders/[id]`)
- **معلومات شاملة**: تفاصيل كاملة للطلب والعميل
- **منتجات الطلب**: قائمة المنتجات مع تفاصيل التنزيل للمنتجات الرقمية
- **التسلسل الزمني**: عرض تطور حالة الطلب بشكل مرئي
- **إجراءات متقدمة**: تحديث الحالة، إرسال إشعارات، طباعة
- **ملاحظات**: إضافة وتتبع الملاحظات الإدارية

### 3. تحليلات الطلبات (`/admin/orders/analytics`)
- **إحصائيات شاملة**: إجمالي الطلبات، الإيرادات، معدل التحويل
- **رسوم بيانية**: الإيرادات الشهرية، توزيع حالات الطلبات
- **المنتجات الأكثر مبيعاً**: تحليل أداء المنتجات
- **رؤى العملاء**: تحليل سلوك العملاء وقيمتهم
- **فترات زمنية**: تحليل البيانات حسب فترات مختلفة

### 4. تصدير البيانات (`/admin/orders/export`)
- **صيغ متعددة**: Excel، CSV، PDF، JSON
- **تصفية متقدمة**: حسب الحالة، التاريخ، المبلغ
- **معاينة**: عرض عينة من البيانات قبل التصدير
- **خيارات مخصصة**: تحديد الأعمدة المطلوبة

## الواجهات والمكونات

### الصفحة الرئيسية (`app/admin/orders/page.tsx`)
```typescript
// المكونات المستخدمة:
- OrderList: قائمة الطلبات مع الجدول
- OrderFilters: تصفية متقدمة
- OrderSearch: بحث ذكي
- OrderStats: إحصائيات مباشرة
```

### مكونات القائمة (`app/admin/orders/components/`)
- **OrderList.tsx**: عرض الطلبات في جدول تفاعلي
- **OrderStatusBadge.tsx**: شارات الحالة الملونة
- **OrderActions.tsx**: أزرار الإجراءات السريعة
- **OrderStatusModal.tsx**: مودال تحديث الحالة
- **OrderFilters.tsx**: تصفية متقدمة
- **OrderSearch.tsx**: بحث ذكي
- **OrderStats.tsx**: إحصائيات البطاقات

### صفحة التفاصيل (`app/admin/orders/[id]/page.tsx`)
```typescript
// التبويبات المتاحة:
- تفاصيل الطلب: معلومات العميل والعنوان والدفع
- المنتجات: قائمة المنتجات مع تفاصيل التنزيل
- التسلسل الزمني: تطور حالة الطلب
- الإجراءات: أزرار التحديث والإجراءات المتقدمة
```

### مكونات التفاصيل (`app/admin/orders/[id]/components/`)
- **OrderDetails.tsx**: معلومات الطلب والعميل
- **OrderItems.tsx**: قائمة المنتجات
- **OrderTimeline.tsx**: التسلسل الزمني
- **OrderActions.tsx**: الإجراءات المتقدمة

### صفحة التحليلات (`app/admin/orders/analytics/page.tsx`)
```typescript
// المكونات التحليلية:
- OrderAnalytics: البطاقات الإحصائية
- RevenueChart: رسم بياني للإيرادات
- OrderStatusChart: توزيع حالات الطلبات
- TopProducts: المنتجات الأكثر مبيعاً
- CustomerInsights: رؤى العملاء
```

### صفحة التصدير (`app/admin/orders/export/page.tsx`)
```typescript
// مكونات التصدير:
- ExportOptions: خيارات التصدير
- ExportFilters: تصفية البيانات
- ExportPreview: معاينة التصدير
```

## حالات الطلبات المدعومة

### 1. في الانتظار (Pending)
- **اللون**: أصفر
- **الإجراءات**: تأكيد، إلغاء، تعديل
- **الوصف**: طلب جديد في انتظار المعالجة

### 2. مؤكد (Confirmed)
- **اللون**: أزرق
- **الإجراءات**: شحن، إلغاء، تعديل
- **الوصف**: تم تأكيد الطلب من الإدارة

### 3. مشحون (Shipped)
- **اللون**: بنفسجي
- **الإجراءات**: تسليم، تعديل
- **الوصف**: تم شحن الطلب للعميل

### 4. تم التسليم (Delivered)
- **اللون**: أخضر
- **الإجراءات**: تعديل فقط
- **الوصف**: تم تسليم الطلب بنجاح

### 5. ملغي (Cancelled)
- **اللون**: أحمر
- **الإجراءات**: تعديل فقط
- **الوصف**: تم إلغاء الطلب

## حالات الدفع المدعومة

### 1. في الانتظار (Pending)
- **اللون**: أصفر
- **الوصف**: في انتظار إتمام الدفع

### 2. مكتمل (Completed)
- **اللون**: أخضر
- **الوصف**: تم إتمام الدفع بنجاح

### 3. فشل (Failed)
- **اللون**: أحمر
- **الوصف**: فشل في عملية الدفع

### 4. مسترد (Refunded)
- **اللون**: برتقالي
- **الوصف**: تم استرداد المبلغ

## الإجراءات السريعة

### 1. تأكيد الطلب
- **متاح ل**: الطلبات في الانتظار
- **الإجراء**: تغيير الحالة إلى "مؤكد"
- **الزر**: أزرق مع أيقونة صح

### 2. شحن الطلب
- **متاح ل**: الطلبات المؤكدة
- **الإجراء**: تغيير الحالة إلى "مشحون"
- **الزر**: بنفسجي مع أيقونة شاحنة

### 3. تسليم الطلب
- **متاح ل**: الطلبات المشحونة
- **الإجراء**: تغيير الحالة إلى "تم التسليم"
- **الزر**: أخضر مع أيقونة صح مزدوجة

### 4. إلغاء الطلب
- **متاح ل**: جميع الطلبات غير المسلمة
- **الإجراء**: تغيير الحالة إلى "ملغي"
- **الزر**: أحمر مع أيقونة إغلاق

## التصفية والبحث

### خيارات التصفية
- **حالة الطلب**: جميع الحالات المدعومة
- **حالة الدفع**: جميع حالات الدفع
- **الفترة الزمنية**: اليوم، أمس، أسبوع، شهر، 3 أشهر، سنة
- **المبلغ**: حد أدنى وأقصى
- **التاريخ**: من تاريخ إلى تاريخ

### البحث الذكي
- **رقم الطلب**: مثال: ORD-2024-0001
- **اسم العميل**: البحث بالاسم الأول أو الأخير
- **البريد الإلكتروني**: البحث بالبريد الإلكتروني
- **رقم الهاتف**: البحث برقم الهاتف

## التحليلات والإحصائيات

### البطاقات الإحصائية
1. **إجمالي الطلبات**: عدد جميع الطلبات
2. **الطلبات في الانتظار**: الطلبات الجديدة
3. **الطلبات المؤكدة**: الطلبات المعتمدة
4. **الطلبات المشحونة**: الطلبات المرسلة
5. **إجمالي الإيرادات**: مجموع المبيعات
6. **متوسط قيمة الطلب**: متوسط قيمة الطلب الواحد

### الرسوم البيانية
1. **الإيرادات الشهرية**: رسم بياني للإيرادات
2. **توزيع حالات الطلبات**: رسم دائري للحالات
3. **المنتجات الأكثر مبيعاً**: قائمة المنتجات الرائدة
4. **رؤى العملاء**: تحليل سلوك العملاء

## تصدير البيانات

### الصيغ المدعومة
- **Excel (.xlsx)**: للتحليل المتقدم
- **CSV (.csv)**: للاستيراد في برامج أخرى
- **PDF (.pdf)**: للطباعة والتوثيق
- **JSON (.json)**: للاستخدام البرمجي

### خيارات التصدير
- **تضمين تفاصيل المنتجات**: قائمة المنتجات في كل طلب
- **تضمين معلومات العميل**: بيانات العميل الكاملة
- **تضمين عنوان الشحن**: عنوان التوصيل
- **تصفية حسب الحالة**: تصدير طلبات محددة
- **تصفية حسب التاريخ**: فترة زمنية محددة

## الأمان والصلاحيات

### نظام الصلاحيات
- **مدير الطلبات**: صلاحيات كاملة لإدارة الطلبات
- **مدير المتجر**: صلاحيات إدارية شاملة
- **خدمة العملاء**: صلاحيات محدودة للعرض والتحديث

### تسجيل النشاطات
- جميع العمليات مسجلة مع التاريخ والوقت
- تتبع المستخدم الذي قام بالعملية
- حفظ الملاحظات والتغييرات

## الاستخدام العملي

### 1. إدارة الطلبات اليومية
1. **فتح لوحة التحكم**: `/admin/orders`
2. **مراجعة الطلبات الجديدة**: تصفية حسب "في الانتظار"
3. **تأكيد الطلبات**: استخدام الإجراءات السريعة
4. **معالجة الدفع**: تحديث حالة الدفع
5. **إعداد الشحن**: تحديث معلومات الشحن

### 2. متابعة الطلبات
1. **فتح تفاصيل الطلب**: النقر على رقم الطلب
2. **مراجعة المعلومات**: التأكد من صحة البيانات
3. **تحديث الحالة**: حسب تقدم الطلب
4. **إضافة ملاحظات**: للتواصل مع الفريق

### 3. التحليل والتقارير
1. **فتح التحليلات**: `/admin/orders/analytics`
2. **اختيار الفترة**: أسبوع، شهر، ربع سنة
3. **مراجعة الإحصائيات**: فهم الأداء
4. **تصدير التقارير**: حسب الحاجة

### 4. تصدير البيانات
1. **فتح صفحة التصدير**: `/admin/orders/export`
2. **اختيار الصيغة**: Excel، CSV، PDF
3. **تحديد البيانات**: المنتجات، العملاء، العناوين
4. **معاينة البيانات**: قبل التصدير
5. **تحميل الملف**: جاهز للاستخدام

## الميزات المتقدمة

### 1. التنبيهات والإشعارات
- تنبيهات للطلبات الجديدة
- إشعارات لتغيير الحالة
- تنبيهات للطلبات المتأخرة

### 2. التكامل مع الأنظمة
- تكامل مع نظام الدفع
- تكامل مع نظام الشحن
- تكامل مع نظام المخزون

### 3. التقارير المجدولة
- تقارير يومية تلقائية
- تقارير أسبوعية
- تقارير شهرية

### 4. الأرشفة والنسخ الاحتياطية
- أرشفة الطلبات القديمة
- نسخ احتياطية دورية
- استعادة البيانات

## الدعم والمساعدة

### الوثائق الإضافية
- دليل API: `Order_API_Report.md`
- دليل النشر: `DEPLOYMENT.md`
- دليل التكامل: `FRONTEND_INTEGRATION_GUIDE.md`

### الاتصال والدعم
- للأسئلة التقنية: فريق التطوير
- للمشاكل التشغيلية: فريق الدعم
- للاقتراحات: إدارة المنتج

---

**تم تطوير هذا النظام بناءً على أفضل الممارسات في تصميم واجهات المستخدم وإدارة الطلبات، مع التركيز على سهولة الاستخدام والكفاءة والإنتاجية.** 