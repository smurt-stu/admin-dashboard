# اختبار إصلاح تحرير المنتج

## الإصلاحات المطبقة

### 1. إصلاح `convertProductToFormData`
- ✅ إصلاح تحويل `cost_price` و `discount_percentage`
- ✅ إضافة طباعة تشخيصية
- ✅ إصلاح تحويل `is_in_stock`

### 2. إصلاح `createProductData`
- ✅ إصلاح إرسال `cost_price` و `discount_percentage`
- ✅ إصلاح إرسال `weight`
- ✅ إصلاح إرسال الحقول المخصصة في جميع الحالات
- ✅ إضافة طباعة تشخيصية

### 3. إصلاح `removeEmptyFields`
- ✅ عدم إزالة القيم `0` و `false` لأنها قيم صحيحة

## البيانات المتوقعة الآن

### البيانات المرسلة في طلب التعديل
```json
{
    "category": "a5231b43-c12f-4e1b-bed0-60dc5c721c7d",
    "product_type": "927cc2b6-9f3a-47d3-8d5b-c4596493153a",
    "max_order_quantity": 10,
    "warranty_period": 12,
    "cost_price": "9.00",
    "discount_percentage": "15.00",
    "custom_fields_data": {
        "النوع": {
            "value": {
                "ar": "كعب عالي",
                "en": "كعب عالي"
            },
            "type": "multilingual",
            "label": {
                "ar": "النوع",
                "en": "النوع"
            },
            "required": false
        }
    }
}
```

### البيانات المعروضة في النموذج
- ✅ سعر التكلفة: "9.00"
- ✅ نسبة الخصم: "15.00"
- ✅ الحقول المخصصة: معبأة بالقيم الصحيحة

## خطوات الاختبار

1. **فتح صفحة تحرير المنتج**
   - انتقل إلى `/admin/products/[id]/edit`
   - تأكد من تحميل البيانات بشكل صحيح

2. **فحص البيانات المعروضة**
   - تأكد من أن `cost_price` يظهر "9.00"
   - تأكد من أن `discount_percentage` يظهر "15.00"
   - تأكد من أن الحقول المخصصة معبأة

3. **تعديل البيانات**
   - قم بتعديل بعض الحقول
   - احفظ التغييرات
   - تأكد من إرسال جميع البيانات المطلوبة

4. **فحص البيانات المرسلة**
   - افتح Developer Tools
   - انتقل إلى Network tab
   - افحص طلب PATCH
   - تأكد من إرسال جميع الحقول المطلوبة

## النتائج المتوقعة

- ✅ جميع الحقول تعرض البيانات الصحيحة
- ✅ جميع البيانات يتم إرسالها في طلب التعديل
- ✅ لا توجد حقول فارغة غير متوقعة
- ✅ الحقول المخصصة تعمل بشكل صحيح 