# ๐ ูุซุงุฆู API ูุธุงู ุงููุฑุงุฌุนุงุช ูุงูุชููููุงุช

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงููุฑุงุฌุนุงุช ูุงูุชููููุงุช ูููุฑ ููุตุฉ ุดุงููุฉ ูุฅุฏุงุฑุฉ ูุฑุงุฌุนุงุช ุงูููุชุฌุงุช ูุงูุฎุฏูุงุช ูุน ููุฒุงุช ูุชูุฏูุฉ ูููุดุฑููู ูุงููุณุชุฎุฏููู ุงูุนุงุฏููู.

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:
- โ ูุธุงู ูุฑุงุฌุนุงุช ูุชูุงูู ูุน ุชููููุงุช ูุฑุนูุฉ
- โ ุชุตููุช ุนูู ูุงุฆุฏุฉ ุงููุฑุงุฌุนุงุช
- โ ูุธุงู ุชุนูููุงุช ูุชุฏุงุฎู
- โ ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ ููููุชุฌุงุช
- โ ุฅุฏุงุฑุฉ ูุชูุฏูุฉ ูููุดุฑููู
- โ ุชุญูู ูู ุงููุดุชุฑูุงุช ุงูููุซูุฉ

---

## ๐ ุงูุตูุงุญูุงุช ูุงูุฃูุงู

### ูููุณุชุฎุฏููู ุงูุนุงุฏููู:
- ูุฑุงุกุฉ ุงููุฑุงุฌุนุงุช ุงููุนุชูุฏุฉ
- ุฅูุดุงุก ูุฑุงุฌุนุงุช ุฌุฏูุฏุฉ
- ุงูุชุตููุช ุนูู ูุงุฆุฏุฉ ุงููุฑุงุฌุนุงุช
- ุฅุถุงูุฉ ุชุนูููุงุช
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูููุชุฌุงุช

### ูููุดุฑููู:
- ุฅุฏุงุฑุฉ ุฌููุน ุงููุฑุงุฌุนุงุช (ูุนุชูุฏุฉ ูุบูุฑ ูุนุชูุฏุฉ)
- ุงุนุชูุงุฏ/ุฑูุถ ุงููุฑุงุฌุนุงุช
- ุฅุถุงูุฉ ุฑุฏูุฏ ุงูุชุงุฌุฑ
- ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ
- ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ก ููุงุท ุงูููุงูุฉ (Endpoints)

### 1. ุฅุฏุงุฑุฉ ุงููุฑุงุฌุนุงุช ุงูุฑุฆูุณูุฉ

#### `GET /api/store-reviews/reviews/`
**ุงููุตู:** ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุฑุงุฌุนุงุช ุงููุนุชูุฏุฉ

**ุงูุตูุงุญูุงุช:** ููุฌููุน

**ุงููุนุงููุงุช:**
```json
{
  "content_type": "integer",     // ููุน ุงูููุชุฌ (ุงุฎุชูุงุฑู)
  "object_id": "string",         // ูุนุฑู ุงูููุชุฌ (ุงุฎุชูุงุฑู)
  "min_rating": "integer",       // ุงูุญุฏ ุงูุฃุฏูู ููุชูููู (ุงุฎุชูุงุฑู)
  "max_rating": "integer",       // ุงูุญุฏ ุงูุฃูุตู ููุชูููู (ุงุฎุชูุงุฑู)
  "search": "string",            // ุงูุจุญุซ ูู ุงูุนููุงู ูุงููุญุชูู
  "ordering": "string",          // ุงูุชุฑุชูุจ (created_at, rating, helpfulness_score)
  "page": "integer"              // ุฑูู ุงูุตูุญุฉ
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "count": 150,
    "next": "http://api.example.com/reviews/?page=2",
    "previous": null,
    "results": [
      {
        "id": 1,
        "user": 123,
        "user_name": "ุฃุญูุฏ ูุญูุฏ",
        "user_avatar": "https://example.com/avatar.jpg",
        "content_type": 15,
        "object_id": "550e8400-e29b-41d4-a716-446655440000",
        "product_title": "ูุชุงุจ ุงูุจุฑูุฌุฉ ุงููุชูุฏู",
        "product_url": "/products/book-123",
        "rating": 5,
        "quality_rating": 5,
        "value_rating": 4,
        "ease_of_use_rating": 5,
        "title": "ูุชุงุจ ููุชุงุฒ ูููุจุฑูุฌูู",
        "review_text": "ูุญุชูู ูููุฏ ุฌุฏุงู...",
        "is_verified_purchase": true,
        "is_approved": true,
        "helpfulness_score": 12,
        "user_found_helpful": true,
        "created_at": "2024-01-15T10:30:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      }
    ]
  }
}
```

#### `POST /api/store-reviews/reviews/`
**ุงููุตู:** ุฅูุดุงุก ูุฑุงุฌุนุฉ ุฌุฏูุฏุฉ

**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู

**ุงููุนุงููุงุช:**
```json
{
  "content_type": 15,
  "object_id": "550e8400-e29b-41d4-a716-446655440000",
  "rating": 5,
  "quality_rating": 5,
  "value_rating": 4,
  "ease_of_use_rating": 5,
  "title": "ุนููุงู ุงููุฑุงุฌุนุฉ",
  "review_text": "ูุต ุงููุฑุงุฌุนุฉ ุงูุชูุตููู",
  "is_verified_purchase": true
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุฅูุดุงุก ุงููุฑุงุฌุนุฉ ุจูุฌุงุญ",
  "data": {
    "id": 1,
    "user": 123,
    "rating": 5,
    "title": "ุนููุงู ุงููุฑุงุฌุนุฉ",
    "review_text": "ูุต ุงููุฑุงุฌุนุฉ ุงูุชูุตููู",
    "is_verified_purchase": true,
    "is_approved": false,
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

#### `GET /api/store-reviews/reviews/{id}/`
**ุงููุตู:** ุงูุญุตูู ุนูู ูุฑุงุฌุนุฉ ูุญุฏุฏุฉ

**ุงูุตูุงุญูุงุช:** ููุฌููุน

#### `PUT /api/store-reviews/reviews/{id}/`
**ุงููุตู:** ุชุญุฏูุซ ูุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุงูู ุงููุฑุงุฌุนุฉ ุฃู ูุดุฑู

#### `DELETE /api/store-reviews/reviews/{id}/`
**ุงููุตู:** ุญุฐู ูุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุงูู ุงููุฑุงุฌุนุฉ ุฃู ูุดุฑู

#### `POST /api/store-reviews/reviews/{id}/helpful/`
**ุงููุตู:** ุงูุชุตููุช ุนูู ูุงุฆุฏุฉ ุงููุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู

**ุงููุนุงููุงุช:**
```json
{
  "is_helpful": true
}
```

#### `GET /api/store-reviews/reviews/my_reviews/`
**ุงููุตู:** ุงูุญุตูู ุนูู ูุฑุงุฌุนุงุช ุงููุณุชุฎุฏู ุงูุญุงูู

**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู

### 2. ุฅุญุตุงุฆูุงุช ุงููุฑุงุฌุนุงุช

#### `GET /api/store-reviews/reviews/statistics/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ูุฑุงุฌุนุงุช ููุชุฌ ูุนูู

**ุงูุตูุงุญูุงุช:** ููุฌููุน

**ุงููุนุงููุงุช:**
```json
{
  "content_type": 15,
  "object_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "content_type": 15,
    "object_id": "550e8400-e29b-41d4-a716-446655440000",
    "total_reviews": 150,
    "average_rating": 4.5,
    "average_quality_rating": 4.6,
    "average_value_rating": 4.3,
    "average_ease_rating": 4.4,
    "rating_distribution": {
      "5_star": 75,
      "4_star": 45,
      "3_star": 20,
      "2_star": 7,
      "1_star": 3
    },
    "last_updated": "2024-01-15T10:30:00Z"
  }
}
```

#### `GET /api/store-reviews/reviews/product_summary/`
**ุงููุตู:** ุงูุญุตูู ุนูู ููุฎุต ุดุงูู ููุฑุงุฌุนุงุช ุงูููุชุฌ

**ุงูุตูุงุญูุงุช:** ููุฌููุน

**ุงููุนุงููุงุช:**
```json
{
  "content_type": 15,
  "object_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "product_id": "550e8400-e29b-41d4-a716-446655440000",
    "product_title": "ูุชุงุจ ุงูุจุฑูุฌุฉ ุงููุชูุฏู",
    "total_reviews": 150,
    "average_rating": 4.5,
    "latest_reviews": [...],
    "rating_distribution": {
      "5_star": 75,
      "4_star": 45,
      "3_star": 20,
      "2_star": 7,
      "1_star": 3,
      "5_star_percentage": 50.0,
      "4_star_percentage": 30.0,
      "3_star_percentage": 13.3,
      "2_star_percentage": 4.7,
      "1_star_percentage": 2.0
    }
  }
}
```

### 3. ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช

#### `GET /api/store-reviews/comments/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุชุนูููุงุช ูุฑุงุฌุนุฉ ูุนููุฉ

**ุงูุตูุงุญูุงุช:** ููุฌููุน

**ุงููุนุงููุงุช:**
```json
{
  "review_pk": 1
}
```

#### `POST /api/store-reviews/comments/`
**ุงููุตู:** ุฅุถุงูุฉ ุชุนููู ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู

**ุงููุนุงููุงุช:**
```json
{
  "review_pk": 1,
  "comment_text": "ูุต ุงูุชุนููู",
  "parent": null  // ููุฑุฏ ุนูู ุชุนููู ุขุฎุฑ
}
```

### 4. ุฅุฏุงุฑุฉ ุงูุชุตููุช ุนูู ุงููุงุฆุฏุฉ

#### `POST /api/store-reviews/helpfulness/`
**ุงููุตู:** ุงูุชุตููุช ุนูู ูุงุฆุฏุฉ ุงููุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู

**ุงููุนุงููุงุช:**
```json
{
  "review": 1,
  "is_helpful": true
}
```

### 5. ุฅุญุตุงุฆูุงุช ุงููุธุงู (ูููุดุฑููู)

#### `GET /api/store-reviews/statistics/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงููุฑุงุฌุนุงุช

**ุงูุตูุงุญูุงุช:** ูุดุฑู

#### `POST /api/store-reviews/statistics/update_statistics/`
**ุงููุตู:** ุฅุนุงุฏุฉ ุญุณุงุจ ุฅุญุตุงุฆูุงุช ููุชุฌ ูุนูู

**ุงูุตูุงุญูุงุช:** ูุดุฑู

**ุงููุนุงููุงุช:**
```json
{
  "content_type": 15,
  "object_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

#### `GET /api/store-reviews/statistics/top_rated_products/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฃูุถู ุงูููุชุฌุงุช ุชููููุงู

**ุงูุตูุงุญูุงุช:** ููุฌููุน

**ุงููุนุงููุงุช:**
```json
{
  "limit": 10
}
```

---

## ๐ง ููุงุท ุงูููุงูุฉ ุงูุฅุฏุงุฑูุฉ (Admin Endpoints)

### ุฅุฏุงุฑุฉ ุงููุฑุงุฌุนุงุช ูููุดุฑููู

#### `GET /api/admin/reviews/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฌููุน ุงููุฑุงุฌุนุงุช (ูุนุชูุฏุฉ ูุบูุฑ ูุนุชูุฏุฉ)

**ุงูุตูุงุญูุงุช:** ูุดุฑู

**ุงููุนุงููุงุช:**
```json
{
  "is_approved": "boolean",      // ุชุตููุฉ ุญุณุจ ุญุงูุฉ ุงูุงุนุชูุงุฏ
  "rating": "integer",           // ุชุตููุฉ ุญุณุจ ุงูุชูููู
  "is_verified_purchase": "boolean", // ุชุตููุฉ ุญุณุจ ุงูุชุญูู
  "content_type": "integer",     // ุชุตููุฉ ุญุณุจ ููุน ุงูููุชุฌ
  "search": "string",            // ุงูุจุญุซ
  "ordering": "string"           // ุงูุชุฑุชูุจ
}
```

#### `PUT /api/admin/reviews/{id}/approve/`
**ุงููุตู:** ุงุนุชูุงุฏ ูุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุดุฑู

#### `PUT /api/admin/reviews/{id}/reject/`
**ุงููุตู:** ุฑูุถ ูุฑุงุฌุนุฉ

**ุงูุตูุงุญูุงุช:** ูุดุฑู

#### `PUT /api/admin/reviews/{id}/merchant_reply/`
**ุงููุตู:** ุฅุถุงูุฉ ุฑุฏ ุงูุชุงุฌุฑ

**ุงูุตูุงุญูุงุช:** ูุดุฑู

**ุงููุนุงููุงุช:**
```json
{
  "merchant_reply": "ูุต ุฑุฏ ุงูุชุงุฌุฑ"
}
```

### ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช ูููุดุฑููู

#### `GET /api/admin/comments/`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฌููุน ุงูุชุนูููุงุช

**ุงูุตูุงุญูุงุช:** ูุดุฑู

#### `PUT /api/admin/comments/{id}/approve/`
**ุงููุตู:** ุงุนุชูุงุฏ ุชุนููู

**ุงูุตูุงุญูุงุช:** ูุดุฑู

#### `PUT /api/admin/comments/{id}/reject/`
**ุงููุตู:** ุฑูุถ ุชุนููู

**ุงูุตูุงุญูุงุช:** ูุดุฑู

### ุฅุญุตุงุฆูุงุช ุงููุธุงู ูููุดุฑููู

#### `GET /api/admin/statistics/overview/`
**ุงููุตู:** ูุธุฑุฉ ุนุงูุฉ ุนูู ุฅุญุตุงุฆูุงุช ุงููุธุงู

**ุงูุตูุงุญูุงุช:** ูุดุฑู

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "total_reviews": 15000,
    "pending_reviews": 250,
    "approved_reviews": 14750,
    "total_comments": 5000,
    "pending_comments": 100,
    "average_rating_system": 4.2,
    "top_products": [...],
    "recent_activity": [...]
  }
}
```

#### `POST /api/admin/statistics/recalculate_all/`
**ุงููุตู:** ุฅุนุงุฏุฉ ุญุณุงุจ ุฌููุน ุงูุฅุญุตุงุฆูุงุช

**ุงูุตูุงุญูุงุช:** ูุดุฑู

---

## ๐ ููุงุฐุฌ ุงูุจูุงูุงุช

### ูููุฐุฌ ุงููุฑุงุฌุนุฉ (Review)
```json
{
  "id": "integer",
  "user": "integer",
  "user_name": "string",
  "user_avatar": "string",
  "content_type": "integer",
  "object_id": "string",
  "product_title": "string",
  "product_url": "string",
  "rating": "integer (1-5)",
  "quality_rating": "integer (1-5)",
  "value_rating": "integer (1-5)",
  "ease_of_use_rating": "integer (1-5)",
  "title": "string",
  "review_text": "string",
  "is_verified_purchase": "boolean",
  "is_approved": "boolean",
  "helpfulness_score": "integer",
  "user_found_helpful": "boolean",
  "merchant_reply": "string",
  "merchant_replied_at": "datetime",
  "created_at": "datetime",
  "updated_at": "datetime"
}
```

### ูููุฐุฌ ุฅุญุตุงุฆูุงุช ุงููุฑุงุฌุนุงุช (ReviewStatistics)
```json
{
  "id": "integer",
  "content_type": "integer",
  "object_id": "string",
  "total_reviews": "integer",
  "average_rating": "decimal",
  "average_quality_rating": "decimal",
  "average_value_rating": "decimal",
  "average_ease_rating": "decimal",
  "rating_distribution": {
    "5_star": "integer",
    "4_star": "integer",
    "3_star": "integer",
    "2_star": "integer",
    "1_star": "integer"
  },
  "last_updated": "datetime"
}
```

---

## ๐จ ุฑููุฒ ุงูุฃุฎุทุงุก

| ุงูููุฏ | ุงููุตู |
|-------|--------|
| 400 | ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ |
| 401 | ุบูุฑ ูุตุฑุญ (ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู) |
| 403 | ููููุน (ุตูุงุญูุงุช ุบูุฑ ูุงููุฉ) |
| 404 | ุบูุฑ ููุฌูุฏ |
| 409 | ุชุนุงุฑุถ (ูุซู ูุฑุงุฌุนุฉ ููุฌูุฏุฉ ูุณุจูุงู) |
| 422 | ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ |
| 429 | ุทูุจุงุช ูุซูุฑุฉ ุฌุฏุงู |
| 500 | ุฎุทุฃ ูู ุงูุฎุงุฏู |

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก ูุฑุงุฌุนุฉ ุฌุฏูุฏุฉ
```bash
curl -X POST "https://api.example.com/api/store-reviews/reviews/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content_type": 15,
    "object_id": "550e8400-e29b-41d4-a716-446655440000",
    "rating": 5,
    "title": "ููุชุฌ ููุชุงุฒ",
    "review_text": "ุฌูุฏุฉ ุนุงููุฉ ูุณุนุฑ ููุงุณุจ",
    "is_verified_purchase": true
  }'
```

### ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ููุชุฌ
```bash
curl -X GET "https://api.example.com/api/store-reviews/reviews/statistics/?content_type=15&object_id=550e8400-e29b-41d4-a716-446655440000"
```

### ุงูุชุตููุช ุนูู ูุงุฆุฏุฉ ูุฑุงุฌุนุฉ
```bash
curl -X POST "https://api.example.com/api/store-reviews/reviews/1/helpful/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"is_helpful": true}'
```

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

- [ ] ุฏุนู ุงูุตูุฑ ูุงูููุฏูููุงุช ูู ุงููุฑุงุฌุนุงุช
- [ ] ูุธุงู ุชูุงุฑูุฑ ุงููุฑุงุฌุนุงุช ุงููุณูุฆุฉ
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ ูููุฑุงุฌุนุงุช
- [ ] ูุธุงู ุงูููุงูุขุช ูููุฑุงุฌุนุงุช ุงููููุฏุฉ
- [ ] ุฏุนู ุงููุฑุงุฌุนุงุช ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
- [ ] ูุธุงู ุงูุชูุตูุงุช ุจูุงุกู ุนูู ุงููุฑุงุฌุนุงุช

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุงูุชูููุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช ุญูู APIุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

**ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** dev@example.com  
**ุงููุงุชู:** +966-50-123-4567  
**ุณุงุนุงุช ุงูุนูู:** ุงูุฃุญุฏ - ุงูุฎููุณุ 9:00 ุต - 6:00 ู 