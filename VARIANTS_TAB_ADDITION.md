# إضافة تبويب المتغيرات

## المشكلة الأصلية

كانت المتغيرات لا تظهر في صفحة التعديل أو الإضافة، مما يجعل من الصعب على المستخدمين إدارة متغيرات المنتجات (مثل الألوان والأحجام).

## الحل المطبق

### 1. إضافة تبويب المتغيرات في صفحة التعديل

تم تعديل ملف `app/admin/products/[id]/edit/page.tsx`:

- **إضافة تبويب المتغيرات**: تم إضافة تبويب "المتغيرات" إلى قائمة التبويبات
- **عرض جدول المتغيرات**: عرض المتغيرات في جدول منظم مع الأعمدة التالية:
  - المتغير (اسم المتغير)
  - SKU (رمز المنتج)
  - الخيارات (الألوان، الأحجام، إلخ)
  - السعر
  - المخزون
  - الحالة (متوفر/غير متوفر)

### 2. إضافة تبويب المتغيرات في صفحة الإضافة

تم إنشاء مكون جديد `app/admin/products/create/components/VariantsTab.tsx`:

- **واجهة إضافة المتغيرات**: إمكانية إضافة متغيرات جديدة للمنتج
- **جدول تفاعلي**: تحرير المتغيرات مباشرة في الجدول
- **إدارة المخزون**: تحديد كمية المخزون لكل متغير
- **إدارة الأسعار**: تحديد سعر مختلف لكل متغير

### 3. تحديث صفحة إنشاء المنتج

تم تعديل ملف `app/admin/products/create/page.tsx`:

- **إضافة تبويب المتغيرات**: إضافة "المتغيرات" إلى قائمة التبويبات
- **استيراد المكون الجديد**: إضافة VariantsTab إلى الصفحة
- **التكامل مع نوع المنتج**: عرض تبويب المتغيرات فقط إذا كان نوع المنتج يدعم المتغيرات

## الميزات الجديدة

### في صفحة التعديل:
1. **عرض المتغيرات الحالية**: جدول منظم يعرض جميع متغيرات المنتج
2. **معلومات شاملة**: SKU، السعر، المخزون، الحالة
3. **عرض الخيارات**: عرض تفاصيل الخيارات (اللون، الحجم، إلخ)

### في صفحة الإضافة:
1. **إضافة متغيرات جديدة**: واجهة سهلة لإضافة متغيرات جديدة
2. **تحرير مباشر**: تحرير المتغيرات مباشرة في الجدول
3. **إدارة المخزون**: تحديد كمية المخزون لكل متغير
4. **إدارة الأسعار**: تحديد سعر مختلف لكل متغير
5. **حذف المتغيرات**: إمكانية حذف المتغيرات غير المطلوبة

## الملفات المعدلة/المضافة

### ملفات معدلة:
1. `app/admin/products/[id]/edit/page.tsx` - إضافة تبويب المتغيرات
2. `app/admin/products/create/page.tsx` - إضافة تبويب المتغيرات

### ملفات جديدة:
1. `app/admin/products/create/components/VariantsTab.tsx` - مكون تبويب المتغيرات

## مثال على الاستخدام

### في صفحة التعديل:
```
المتغيرات (9)
├── أحمر - XS | SKU: CLO-0BA7459D-VAR-01 | السعر: 84.99 د.ك | المخزون: 41 | متوفر
├── أزرق - XS | SKU: CLO-0BA7459D-VAR-02 | السعر: 84.99 د.ك | المخزون: 43 | متوفر
├── أخضر - XS | SKU: CLO-0BA7459D-VAR-03 | السعر: 84.99 د.ك | المخزون: 18 | متوفر
└── ...
```

### في صفحة الإضافة:
```
إضافة متغير جديد
├── اسم المتغير: أحمر - XS
├── SKU: CLO-0BA7459D-VAR-01
├── السعر: 84.99
└── المخزون: 50
```

## ملاحظات تقنية

- تم استخدام نفس تصميم الجداول المستخدم في صفحة التفاصيل
- تم إضافة معالجة للأخطاء والقيم الفارغة
- تم الحفاظ على التنسيق العربي للواجهة
- تم إضافة أيقونات مناسبة لكل قسم

## اختبار التحسينات

1. **صفحة التعديل**:
   - افتح صفحة تعديل منتج يحتوي على متغيرات
   - انتقل إلى تبويب "المتغيرات"
   - تحقق من عرض جميع المتغيرات بشكل صحيح

2. **صفحة الإضافة**:
   - افتح صفحة إضافة منتج جديد
   - اختر نوع منتج يدعم المتغيرات
   - انتقل إلى تبويب "المتغيرات"
   - جرب إضافة متغير جديد
   - تحقق من تحرير وحذف المتغيرات 